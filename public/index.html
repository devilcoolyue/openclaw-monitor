<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>openclaw monitor</title>
<link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/css/sidebar.css">
<link rel="stylesheet" href="/css/boot.css">
<link rel="stylesheet" href="/css/toast.css">
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/session.css">
<link rel="stylesheet" href="/css/stream.css">
<link rel="stylesheet" href="/css/system.css">
<link rel="stylesheet" href="/css/mobile.css">
</head>
<body>

<!-- ═══ BOOT SCREEN ═══════════════════════════════════════ -->
<div class="boot-screen" id="boot-screen">
  <div class="boot-box">
    <div class="boot-logo"><em>openclaw</em> monitor</div>

    <div class="boot-spinner-wrap">
      <div class="boot-spinner" id="boot-spinner"></div>
      <div class="boot-icon" id="boot-icon"></div>
    </div>

    <div class="boot-steps" id="boot-steps">
      <div class="boot-step" id="boot-step-proc">
        <span class="boot-step-icon">1</span>
        <div>
          <div class="boot-step-text" id="boot-step-proc-text">Detecting openclaw process…</div>
        </div>
      </div>
      <div class="boot-step" id="boot-step-log">
        <span class="boot-step-icon">2</span>
        <div>
          <div class="boot-step-text" id="boot-step-log-text">Locating log files…</div>
        </div>
      </div>
      <div class="boot-step" id="boot-step-sess">
        <span class="boot-step-icon">3</span>
        <div>
          <div class="boot-step-text" id="boot-step-sess-text">Loading sessions…</div>
        </div>
      </div>
    </div>

    <div class="boot-progress"><div class="boot-progress-bar" id="boot-progress"></div></div>

    <!-- shown when openclaw is not detected -->
    <div class="boot-alert" id="boot-alert">
      <div class="boot-alert-icon"><span class="icon" style="font-size:40px;color:var(--red)"><svg viewBox="0 0 24 24"><path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg></span></div>
      <div class="boot-alert-title" id="boot-alert-title">openclaw not detected</div>
      <div class="boot-alert-desc" id="boot-alert-desc">
        The openclaw process is not running or not accessible on this server.
      </div>
      <div class="boot-alert-hint" id="boot-alert-hint">
        Make sure openclaw is installed and running:<br>
        <code>openclaw</code>
      </div>
      <button class="boot-retry-btn" id="boot-retry" onclick="bootCheck()">Retry</button>
    </div>

    <!-- env info shown on success -->
    <div class="boot-info" id="boot-info">
      <div class="boot-info-row">
        <span class="boot-info-label" id="boot-info-sess-label">Session Dir</span>
        <span class="boot-info-val" id="boot-info-sess-val">—</span>
      </div>
      <div class="boot-info-row">
        <span class="boot-info-label" id="boot-info-log-label">Today Log</span>
        <span class="boot-info-val" id="boot-info-log-val">—</span>
      </div>
    </div>
  </div>
</div>

<!-- Toast Container -->
<div class="toast-container" id="toast-container"></div>

<!-- ═══ SIDEBAR ═══════════════════════════════════════════ -->
<aside class="sidebar">
  <div class="sb-head">
    <div class="sb-logo"><em>openclaw</em> monitor</div>
    <div class="live-tag"><span class="live-dot"></span>live</div>
  </div>

  <div class="sb-nav">
    <button class="nav-btn active" id="btn-live">
      <span class="nb-icon icon icon-sm"><svg viewBox="0 0 24 24"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg></span>
      <span class="nb-label">Live Logs</span>
      <span class="nb-badge" id="evt-cnt">0</span>
    </button>
    <button class="nav-btn" id="btn-system">
      <span class="nb-icon icon icon-sm"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg></span>
      <span class="nb-label">System</span>
    </button>
  </div>

  <div class="sb-label">Sessions <span id="sess-active" style="color:var(--green);margin-left:6px"></span></div>
  <div class="sb-sessions" id="sb-sessions">
    <div class="empty"><p>No sessions</p></div>
  </div>

  <div class="sb-foot">
    <div class="sb-foot-row">
      <div class="sb-foot-left">
        <span class="cd connecting" id="conn-dot"></span>
        <span class="cd-label" id="conn-label">Connecting…</span>
      </div>
      <div class="sb-foot-right">
        <button class="lang-btn" id="lang-btn" title="切换语言/Language">中</button>
        <button class="theme-btn" id="theme-btn" title="Toggle theme"><span class="icon icon-sm" id="theme-icon"><svg viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1111.21 3a7 7 0 009.79 9.79z"/></svg></span></button>
        <button class="logout-btn" id="logout-btn" title="Logout"><span class="icon icon-sm"><svg viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg></span></button>
      </div>
    </div>
    <div class="sb-version" id="sb-version"></div>
  </div>
</aside>
<div class="sidebar-backdrop" id="sidebar-backdrop"></div>

<!-- ═══ MAIN ═══════════════════════════════════════════════ -->
<main class="main">
  <div class="main-hdr">
    <button class="menu-btn" id="menu-btn" title="Menu"><span class="icon icon-lg"><svg viewBox="0 0 24 24"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg></span></button>
    <div class="mh-left">
      <span class="mh-title" id="mh-title">Live Logs</span>
      <span class="mh-sub"  id="mh-sub">openclaw logs --follow</span>
    </div>
    <div class="mh-right">
      <div class="search-box" id="search-box">
        <input type="text" class="search-input" id="search-input" placeholder="Search logs...">
        <button class="search-clear" id="search-clear"><span class="icon" style="font-size:12px"><svg viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg></span></button>
      </div>
      <div class="filters" id="filters">
        <button class="fpill active" data-f="all">All</button>
        <button class="fpill" data-f="queue">Queue</button>
        <button class="fpill" data-f="run">Run</button>
        <button class="fpill" data-f="tool">Tool</button>
        <button class="fpill" data-f="session">Session</button>
        <button class="fpill" data-f="error">Error</button>
      </div>
      <div class="toggle-wrap">
        <span>Scroll</span>
        <div class="tog on" id="tog-scroll"><div class="knob"></div></div>
      </div>
      <button class="btn-clr" id="btn-clr">Clear</button>
    </div>
  </div>

  <!-- session summary bar (hidden until a session is selected) -->
  <div class="sess-summary" id="sess-summary" style="display:none">
    <div class="ss-toggle" id="ss-toggle">
      <span class="ss-toggle-info" id="ss-toggle-info">—</span>
      <span class="ss-toggle-arrow" id="ss-toggle-arrow">▼</span>
    </div>
    <div class="ss-body" id="ss-body">
    <div class="ss-row-top">
      <div class="ss-item"><span class="ss-label">Session</span><span class="ss-val" id="ss-id">—</span></div>
      <div class="ss-item"><span class="ss-label">Provider</span><span class="ss-val" id="ss-provider">—</span></div>
      <div class="ss-item"><span class="ss-label">Model</span><span class="ss-val" id="ss-model">—</span></div>
      <div class="ss-item"><span class="ss-label">Messages</span><span class="ss-val" id="ss-msgs">—</span></div>
      <div class="ss-item"><span class="ss-label">Status</span><span class="ss-val" id="ss-status">—</span></div>
      <div class="ss-item"><span class="ss-label">Tokens</span><span class="ss-val" id="ss-tokens">—</span></div>
      <div class="ss-item"><span class="ss-label">Cost</span><span class="ss-val" id="ss-cost">—</span></div>
    </div>
    <div class="ss-models" id="ss-models"></div>
    </div><!-- /.ss-body -->
  </div>

  <div class="stream" id="stream">
    <div class="empty"><div class="ei"></div><p id="stream-wait-text">Waiting for events…</p></div>
  </div>
  <button class="scroll-top-btn" id="scroll-top-btn" title="Scroll to top"><span class="icon icon-md"><svg viewBox="0 0 24 24"><polyline points="18 15 12 9 6 15"/></svg></span></button>
</main>

<script type="module" src="/js/main.js"></script>
</body>
</html>
