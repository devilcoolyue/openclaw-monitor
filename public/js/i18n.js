import { S } from './state.js';

export const I18N = {
  en: {
    liveLogs: 'Live Logs',
    sessions: 'Sessions',
    active: 'active',
    noSessions: 'No sessions found',
    msgs: 'msgs',
    connected: 'Connected',
    disconnected: 'Disconnected',
    connecting: 'Connecting…',
    time: 'Time',
    type: 'Type',
    content: 'Content',
    actions: 'Actions',
    all: 'All',
    queue: 'Queue',
    run: 'Run',
    tool: 'Tool',
    session: 'Session',
    error: 'Error',
    scroll: 'Scroll',
    clear: 'Clear',
    searchLogs: 'Search logs...',
    waiting: 'Waiting for events…',
    copySuccess: 'Copied!',
    copyFailed: 'Copy failed',
    provider: 'Provider',
    model: 'Model',
    messages: 'Messages',
    status: 'Status',
    user: 'User',
    assistant: 'Assistant',
    toolResult: 'Tool Result',
    meta: 'Meta',
    thinking: 'Thinking',
    response: 'Response',
    tokens: 'Tokens',
    cost: 'Cost',
    inputTokens: 'In',
    outputTokens: 'Out',
    cacheTokens: 'Cache',
    idle: 'idle',
    processing: 'processing',
    idleFor: 'idle {0}',
    justNow: 'just now',
    minutesAgo: '{0}m ago',
    hoursAgo: '{0}h ago',
    daysAgo: '{0}d ago',
    system: 'System',
    sysRefresh: 'Refresh',
    sysLastUpdate: 'Last updated',
    sysChannelHealth: 'Channel Health',
    sysDiagnostics: 'System Diagnostics',
    sysPresence: 'Heartbeat & Presence',
    sysContextWindow: 'Context Window',
    sysPromptReport: 'System Prompt Report',
    sysSkillsSnapshot: 'Skills Snapshot',
    sysCompaction: 'Compaction History',
    sysDevices: 'Devices',
    sysCronJobs: 'Cron Jobs',
    sysUpdateCheck: 'Update Check',
    sysExecApprovals: 'Exec Approvals',
    sysPaired: 'Paired',
    sysPending: 'Pending',
    sysNoData: 'No data available',
    sysNoJobs: 'No cron jobs configured',
    sysVersion: 'Version',
    sysLastChecked: 'Last Checked',
    sysSocket: 'Socket',
    sysCompactions: 'compactions',
    sysLoading: 'Loading system data…',
    gatewayOnline: 'Gateway online',
    gatewayOffline: 'Gateway offline',
    gatewayWaiting: 'Waiting for reconnection…',
    gatewayRestored: 'Connection restored',
    offline: 'OFFLINE',
    live: 'LIVE',
    sessHeartbeat: 'Heartbeat',
    sessCron: 'Cron Task',
    sessFeishuGroup: 'Feishu Group',
    sessFeishuDM: 'Feishu DM',
    sessDdingtalkGroup: 'DingTalk Group',
    sessDdingtalkDM: 'DingTalk DM',
    sessQqbotGroup: 'QQ Group',
    sessQqbotDM: 'QQ DM',
    sessWecomGroup: 'WeCom Group',
    sessWecomDM: 'WeCom DM',
    sessMain: 'Main Session',
    sessGroupSuffix: 'Group',
    sessDmSuffix: 'DM',
  },
  zh: {
    liveLogs: '实时日志',
    sessions: '会话列表',
    active: '运行中',
    noSessions: '暂无会话',
    msgs: '条消息',
    connected: '已连接',
    disconnected: '已断开',
    connecting: '连接中…',
    time: '时间',
    type: '类型',
    content: '内容',
    actions: '操作',
    all: '全部',
    queue: '队列',
    run: '运行',
    tool: '工具',
    session: '会话',
    error: '错误',
    scroll: '自动滚动',
    clear: '清空',
    searchLogs: '搜索日志...',
    waiting: '等待事件中…',
    copySuccess: '已复制!',
    copyFailed: '复制失败',
    provider: '提供商',
    model: '模型',
    messages: '消息数',
    status: '状态',
    user: '用户',
    assistant: '助手',
    toolResult: '工具结果',
    meta: '元数据',
    thinking: '思考中',
    response: '回答',
    tokens: 'Tokens',
    cost: '费用',
    inputTokens: '输入',
    outputTokens: '输出',
    cacheTokens: '缓存',
    idle: '空闲',
    processing: '运行中',
    idleFor: '空闲 {0}',
    justNow: '刚刚',
    minutesAgo: '{0}分钟前',
    hoursAgo: '{0}小时前',
    daysAgo: '{0}天前',
    system: '系统',
    sysRefresh: '刷新',
    sysLastUpdate: '上次更新',
    sysChannelHealth: '通道状态',
    sysDiagnostics: '系统诊断',
    sysPresence: '心跳 & 在线状态',
    sysContextWindow: '上下文窗口',
    sysPromptReport: '系统提示报告',
    sysSkillsSnapshot: '技能快照',
    sysCompaction: '压缩历史',
    sysDevices: '设备',
    sysCronJobs: '定时任务',
    sysUpdateCheck: '更新检查',
    sysExecApprovals: '执行审批',
    sysPaired: '已配对',
    sysPending: '待确认',
    sysNoData: '暂无数据',
    sysNoJobs: '未配置定时任务',
    sysVersion: '版本',
    sysLastChecked: '上次检查',
    sysSocket: 'Socket',
    sysCompactions: '次压缩',
    sysLoading: '正在加载系统数据…',
    gatewayOnline: 'Gateway 已上线',
    gatewayOffline: 'Gateway 已离线',
    gatewayWaiting: '正在等待重新连接…',
    gatewayRestored: '连接已恢复',
    offline: '离线',
    live: '在线',
    sessHeartbeat: '心跳会话',
    sessCron: '定时任务',
    sessFeishuGroup: '飞书群聊',
    sessFeishuDM: '飞书私聊',
    sessDdingtalkGroup: '钉钉群聊',
    sessDdingtalkDM: '钉钉私聊',
    sessQqbotGroup: 'QQ群聊',
    sessQqbotDM: 'QQ私聊',
    sessWecomGroup: '企业微信群聊',
    sessWecomDM: '企业微信私聊',
    sessMain: '主会话',
    sessGroupSuffix: '群聊',
    sessDmSuffix: '私聊',
  }
};

export function i18n(key) {
  return I18N[S.lang]?.[key] || I18N.en[key] || key;
}

export const KEY_ZH = {
  source:'来源', run:'运行', generatedAt:'生成时间', sessionId:'会话ID', sessionKey:'会话密钥',
  provider:'提供商', model:'模型', workspaceDir:'工作目录', bootstrapMaxChars:'引导最大字符数',
  sandbox:'沙盒', host:'主机', hostname:'主机名', ip:'IP', mode:'模式', status:'状态',
  timestamp:'时间戳', uptime:'运行时长', platform:'平台', role:'角色', clientMode:'客户端模式',
  version:'版本', socket:'套接字', path:'路径', agents:'代理', defaults:'默认值',
  lastNotifiedVersion:'最新通知版本', lastNotifiedTag:'最新通知标签', lastCheckedAt:'上次检查时间',
  name:'名称', channel:'通道', error:'错误', type:'类型', schedule:'计划',
  createdAtMs:'创建时间(ms)', updatedAtMs:'更新时间(ms)',
  sessionTarget:'会话目标', wakeMode:'唤醒模式', payload:'负载', delivery:'投递', state:'状态',
  command:'命令', enabled:'启用', lastRun:'上次运行', nextRun:'下次运行',
  compactionCount:'压缩次数', contextTokens:'上下文Tokens', totalTokens:'总Tokens', percent:'百分比',
  messages:'消息数', tokens:'Tokens', cost:'费用', cwd:'工作目录', pid:'进程ID',
  startedAt:'开始时间', lastActiveAt:'上次活跃', project:'项目', user:'用户',
  description:'描述', id:'ID', key:'键', value:'值', count:'数量', size:'大小',
  maxTokens:'最大Tokens', temperature:'温度', topP:'Top P', topK:'Top K',
  prompt:'提示词', system:'系统', input:'输入', output:'输出', cache:'缓存',
  inputTokens:'输入Tokens', outputTokens:'输出Tokens', cacheTokens:'缓存Tokens',
  tools:'工具', skill:'技能', skills:'技能列表', config:'配置', settings:'设置',
  timeout:'超时', interval:'间隔', retries:'重试次数', maxRetries:'最大重试次数',
  url:'URL', port:'端口', address:'地址', protocol:'协议',
  created:'创建时间', updated:'更新时间', deleted:'删除时间',
  active:'活跃', inactive:'非活跃', pending:'待处理', completed:'已完成',
  failed:'失败', success:'成功', running:'运行中', stopped:'已停止',
  duration:'时长', elapsed:'已用时间', remaining:'剩余时间',
  filename:'文件名', directory:'目录', extension:'扩展名',
  paired:'已配对', pairedAt:'配对时间', lastUsedAtMs:'上次使用时间',
  heartbeat:'心跳', defaultAgentId:'默认代理ID', agentId:'代理ID',
  every:'执行间隔', everyMs:'间隔(毫秒)',
  channelSummary:'通道摘要', queuedSystemEvents:'排队事件',
  sessions:'会话', paths:'路径列表', recent:'最近会话', byAgent:'按代理分组',
  kind:'类型', updatedAt:'更新时间', age:'存活时间',
  systemSent:'系统已发送', abortedLastRun:'上次中断',
  remainingTokens:'剩余Tokens', percentUsed:'使用率', flags:'标签',
  os:'操作系统', arch:'架构', release:'内核版本', label:'标签',
  update:'更新信息', root:'根路径', installKind:'安装方式', packageManager:'包管理器',
  deps:'依赖', registry:'注册表', manager:'管理器',
  lockfilePath:'锁文件路径', markerPath:'标记文件路径', reason:'原因',
  latestVersion:'最新版本', updateChannel:'更新通道', updateChannelSource:'更新通道来源',
  memory:'记忆', memoryPlugin:'记忆插件', slot:'插槽',
  gateway:'网关', urlSource:'URL来源', misconfigured:'配置异常',
  reachable:'可达', connectLatencyMs:'连接延迟(ms)', self:'本机',
  gatewayService:'网关服务', nodeService:'节点服务',
  installed:'已安装', loadedText:'加载状态', runtimeShort:'运行状态',
  defaultId:'默认ID', totalSessions:'总会话数',
  bootstrapPendingCount:'待引导数量', bootstrapPending:'待引导',
  sessionsPath:'会话路径', sessionsCount:'会话数量',
  lastUpdatedAt:'上次更新时间', lastActiveAgeMs:'上次活跃(ms)',
  securityAudit:'安全审计', ts:'时间戳', summary:'摘要', findings:'发现',
  critical:'严重', warn:'警告', info:'信息',
  checkId:'检查项', severity:'严重程度', title:'标题', detail:'详情', remediation:'修复建议',
  deviceFamily:'设备类型', modelIdentifier:'型号标识', deviceId:'设备ID',
  roles:'角色列表', scopes:'权限范围', instanceId:'实例ID', text:'描述',
  issues:'问题列表', issueCount:'问题数量',
  systemPrompt:'系统提示词', chars:'字符数',
  projectContextChars:'项目上下文字符数', nonProjectContextChars:'非项目上下文字符数',
  injectedWorkspaceFiles:'注入工作区文件', missing:'缺失',
  rawChars:'原始字符数', injectedChars:'注入字符数', truncated:'已截断',
  promptChars:'提示词字符数', entries:'条目', blockChars:'块字符数',
  summaryChars:'摘要字符数', schemaChars:'模式字符数', propertiesCount:'属性数量',
  listChars:'列表字符数', sandboxed:'沙盒化',
  publicKey:'公钥', clientId:'客户端ID', token:'令牌',
  jobs:'任务列表',
};

export function translateKey(k) {
  if (S.lang !== 'zh') return k;
  if (KEY_ZH[k]) return KEY_ZH[k];
  return k.replace(/([a-z])([A-Z])/g, '$1 $2')
          .replace(/([A-Z]+)([A-Z][a-z])/g, '$1 $2')
          .replace(/^./, c => c.toUpperCase());
}
